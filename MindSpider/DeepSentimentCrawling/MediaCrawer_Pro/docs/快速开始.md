# å¿«é€Ÿå¼€å§‹

## ğŸ“‹ å‰ç½®è¦æ±‚

- **Python**: 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 18.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **MongoDB**: 4.4 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Redis**: 6.x æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰

## ğŸš€ å®‰è£…æ­¥éª¤

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-repo/MediaCrawer_Pro.git
cd MediaCrawer_Pro
```

### 2. åç«¯å®‰è£…

#### 2.1 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
cd backend

# ä½¿ç”¨ conda
conda create -n mediacrawler-pro python=3.10
conda activate mediacrawler-pro

# æˆ–ä½¿ç”¨ venv
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows
```

#### 2.2 å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

#### 2.3 é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯
```

æœ€å°é…ç½®ç¤ºä¾‹ï¼š

```ini
# MongoDB é…ç½®ï¼ˆå¿…éœ€ï¼‰
MONGODB_URI=mongodb://localhost:27017
MONGODB_DB_NAME=mediacrawler_pro

# ç­¾åæœåŠ¡ URLï¼ˆå¿…éœ€ï¼‰
SIGNATURE_SERVICE_URL=http://localhost:3000

# å…¶ä»–é…ç½®ä½¿ç”¨é»˜è®¤å€¼å³å¯
```

### 3. ç­¾åæœåŠ¡å®‰è£…

```bash
cd signature-service

# å®‰è£…ä¾èµ–
npm install
```

### 4. å‰ç«¯å®‰è£…

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install
```

## ğŸ¯ å¯åŠ¨æœåŠ¡

### 1. å¯åŠ¨ MongoDB

ç¡®ä¿ MongoDB æœåŠ¡å·²å¯åŠ¨ï¼š

```bash
# Linux/Mac
mongod --dbpath /path/to/data

# Windows
mongod --dbpath C:\path\to\data

# æˆ–ä½¿ç”¨ç³»ç»ŸæœåŠ¡
sudo systemctl start mongod  # Linux
brew services start mongodb-community  # Mac
```

### 2. å¯åŠ¨ç­¾åæœåŠ¡

```bash
cd signature-service
npm start
```

æœåŠ¡å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

### 3. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
python main.py --port 8888
```

åç«¯ API å°†åœ¨ `http://localhost:8888` å¯åŠ¨ã€‚

### 4. å¯åŠ¨å‰ç«¯åº”ç”¨

#### å¼€å‘æ¨¡å¼

```bash
cd frontend

# Web å¼€å‘
npm run dev

# Electron æ¡Œé¢åº”ç”¨å¼€å‘
npm run electron:dev
```

#### ç”Ÿäº§æ„å»º

```bash
cd frontend

# Web æ„å»º
npm run build

# Electron æ‰“åŒ…
npm run electron:build
```

## ğŸ“ éªŒè¯å®‰è£…

### 1. æ£€æŸ¥åç«¯æœåŠ¡

```bash
curl http://localhost:8888/health
```

åº”è¯¥è¿”å›ï¼š

```json
{
  "code": 0,
  "message": "success",
  "data": {
    "status": "healthy",
    "version": "1.0.0",
    "app_name": "MediaCrawer Pro"
  }
}
```

### 2. æ£€æŸ¥ç­¾åæœåŠ¡

```bash
curl http://localhost:3000/health
```

### 3. æ£€æŸ¥å‰ç«¯åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5173`ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

## ğŸ® ç¬¬ä¸€ä¸ªä»»åŠ¡

### æ–¹å¼1ï¼šä½¿ç”¨å‰ç«¯ç•Œé¢

1. æ‰“å¼€å‰ç«¯åº”ç”¨
2. ç‚¹å‡»"åˆ›å»ºä»»åŠ¡"
3. å¡«å†™ä»»åŠ¡ä¿¡æ¯ï¼š
   - å¹³å°ï¼šå°çº¢ä¹¦
   - ç±»å‹ï¼šå…³é”®è¯æœç´¢
   - å…³é”®è¯ï¼šPython
   - æ•°é‡ï¼š10
4. ç‚¹å‡»"åˆ›å»º"

### æ–¹å¼2ï¼šä½¿ç”¨ API

```bash
curl -X POST http://localhost:8888/api/v1/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "platform": "xhs",
    "type": "search",
    "keywords": ["Python"],
    "max_count": 10,
    "enable_comment": false,
    "enable_download": false
  }'
```

### æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€

```bash
# è·å–ä»»åŠ¡åˆ—è¡¨
curl http://localhost:8888/api/v1/tasks

# è·å–å…·ä½“ä»»åŠ¡è¯¦æƒ…
curl http://localhost:8888/api/v1/tasks/{task_id}
```

## âš™ï¸ é…ç½®è´¦å·æ± ï¼ˆå¯é€‰ï¼‰

ä¸ºäº†æé«˜çˆ¬å–ç¨³å®šæ€§ï¼Œå»ºè®®é…ç½®è´¦å·æ± ï¼š

### 1. è·å– Cookie

1. æ‰“å¼€æµè§ˆå™¨ï¼Œç™»å½•å°çº¢ä¹¦ç½‘é¡µç‰ˆ
2. æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
3. åˆ‡æ¢åˆ° Network æ ‡ç­¾
4. åˆ·æ–°é¡µé¢ï¼Œæ‰¾åˆ°ä»»æ„è¯·æ±‚
5. åœ¨è¯·æ±‚å¤´ä¸­å¤åˆ¶å®Œæ•´çš„ Cookie

### 2. æ·»åŠ åˆ°è´¦å·æ± 

é€šè¿‡ API æ·»åŠ ï¼š

```bash
curl -X POST http://localhost:8888/api/v1/accounts \
  -H "Content-Type: application/json" \
  -d '{
    "platform": "xhs",
    "cookie": "ä½ çš„å®Œæ•´Cookie",
    "weight": 1,
    "status": "active"
  }'
```

æˆ–è€…é€šè¿‡å‰ç«¯ç•Œé¢ï¼š

1. è¿›å…¥"è´¦å·ç®¡ç†"é¡µé¢
2. ç‚¹å‡»"æ·»åŠ è´¦å·"
3. å¡«å†™ä¿¡æ¯å¹¶ä¿å­˜

### 3. å¯ç”¨è´¦å·æ± 

ä¿®æ”¹ `.env` æ–‡ä»¶ï¼š

```ini
ACCOUNT_POOL_ENABLED=true
ACCOUNT_ROTATION_STRATEGY=round_robin
```

é‡å¯åç«¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆã€‚

## ğŸ”§ é…ç½®ä»£ç†æ± ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨ä»£ç†ï¼Œå¯ä»¥é…ç½®ä»£ç†æ± ï¼š

### 1. æ·»åŠ ä»£ç†

```bash
curl -X POST http://localhost:8888/api/v1/proxies \
  -H "Content-Type: application/json" \
  -d '{
    "protocol": "http",
    "host": "127.0.0.1",
    "port": 7890,
    "provider": "custom"
  }'
```

### 2. å¯ç”¨ä»£ç†æ± 

ä¿®æ”¹ `.env` æ–‡ä»¶ï¼š

```ini
PROXY_ENABLED=true
PROXY_POOL_SIZE=10
```

## ğŸ“Š æ•°æ®æŸ¥çœ‹

### 1. MongoDB æ•°æ®

ä½¿ç”¨ MongoDB Compass æˆ–å‘½ä»¤è¡Œè¿æ¥ï¼š

```bash
mongosh
use mediacrawler_pro

# æŸ¥çœ‹ç¬”è®°æ•°æ®
db.notes.find().limit(10)

# æŸ¥çœ‹è¯„è®ºæ•°æ®
db.comments.find().limit(10)

# æŸ¥çœ‹ä»»åŠ¡æ•°æ®
db.tasks.find()
```

### 2. å¯¼å‡ºæ•°æ®

```bash
# å¯¼å‡ºç¬”è®°æ•°æ®ä¸º JSON
mongoexport --db=mediacrawler_pro --collection=notes --out=notes.json

# å¯¼å‡ºä¸º CSV
mongoexport --db=mediacrawler_pro --collection=notes --type=csv --fields=note_id,title,desc --out=notes.csv
```

## ğŸ” å¸¸è§é—®é¢˜

### 1. MongoDB è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`âŒ MongoDB è¿æ¥å¤±è´¥`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®è®¤ MongoDB æœåŠ¡å·²å¯åŠ¨
- æ£€æŸ¥ `MONGODB_URI` é…ç½®æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### 2. ç­¾åæœåŠ¡è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`âŒ ç­¾åå¤±è´¥`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®è®¤ç­¾åæœåŠ¡å·²å¯åŠ¨
- æ£€æŸ¥ `SIGNATURE_SERVICE_URL` é…ç½®
- æŸ¥çœ‹ç­¾åæœåŠ¡æ—¥å¿—

### 3. çˆ¬å–å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`DataFetchError`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤è´¦å· Cookie æ˜¯å¦æœ‰æ•ˆ
- æ£€æŸ¥æ˜¯å¦éœ€è¦ä»£ç†
- é™ä½å¹¶å‘æ•°é‡

### 4. ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š`Address already in use`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ `PORT` é…ç½®
- æˆ–å…³é—­å ç”¨ç«¯å£çš„ç¨‹åº

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨ï¼ˆLinux/Macï¼‰
lsof -i :8888

# æŸ¥çœ‹ç«¯å£å ç”¨ï¼ˆWindowsï¼‰
netstat -ano | findstr :8888
```

## ğŸ“š ä¸‹ä¸€æ­¥

- é˜…è¯» [API æ–‡æ¡£](./APIæ–‡æ¡£.md) äº†è§£å®Œæ•´çš„ API æ¥å£
- æŸ¥çœ‹ [å¼€å‘æŒ‡å—](./å¼€å‘æŒ‡å—.md) å­¦ä¹ å¦‚ä½•æ‰©å±•åŠŸèƒ½
- å‚è€ƒ [é…ç½®è¯´æ˜](./é…ç½®è¯´æ˜.md) è¿›è¡Œé«˜çº§é…ç½®

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š`backend/logs/app.log`
2. æœç´¢ [Issues](https://github.com/your-repo/MediaCrawer_Pro/issues)
3. æäº¤æ–°çš„ Issue
4. åŠ å…¥äº¤æµç¾¤

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰




