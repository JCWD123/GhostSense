# ğŸ‰ MediaCrawer Pro V2.0 ä¼˜åŒ–å®Œæˆè¯´æ˜

## ğŸ“‹ ä¼˜åŒ–ç›®æ ‡

æ ¹æ®é¡¹ç›®éœ€æ±‚ï¼Œå®Œæˆäº†ä¸‰å¤§æ–¹å‘çš„ä¼˜åŒ–ï¼š

1. âœ… **ç­¾åç®—æ³•è§£è€¦** - é‡æ„ä¸ºç‹¬ç«‹SDKåŒ…ï¼Œæ”¯æŒå¤šæ¡†æ¶é›†æˆ
2. âœ… **Playwrightè‡ªåŠ¨è·å–x-s-common** - ä»çœŸå®æµè§ˆå™¨ç¯å¢ƒè·å–å®Œæ•´ç­¾å
3. âœ… **Playwrighté©¾é©¶Electron Chromium** - è½»é‡åŒ–ï¼Œå¤ç”¨Electronæµè§ˆå™¨

---

## ğŸ¯ ä¼˜åŒ–1ï¼šç­¾åç®—æ³•å®Œå…¨è§£è€¦

### æ¶æ„é‡æ„

```
signature-service/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                        # çº¯JSé€†å‘ç­¾åç®—æ³•
â”‚   â”‚   â””â”€â”€ xhs_signature.js        # å°çº¢ä¹¦ x-s, x-t ç”Ÿæˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ playwright/                  # æµè§ˆå™¨è‡ªåŠ¨åŒ–è·å–
â”‚   â”‚   â””â”€â”€ xhs_browser.js          # Playwright è·å–å®Œæ•´å¤´
â”‚   â”‚
â”‚   â”œâ”€â”€ sdk/                         # SDKç»Ÿä¸€å…¥å£
â”‚   â”‚   â””â”€â”€ index.js                # æ··åˆå®¢æˆ·ç«¯
â”‚   â”‚
â”‚   â””â”€â”€ api/                         # HTTPæœåŠ¡
â”‚       â””â”€â”€ server.js               # Fastify APIæœåŠ¡
â”‚
â”œâ”€â”€ examples/                        # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ node_example.js             # Node.js ä½¿ç”¨ç¤ºä¾‹
â”‚   â””â”€â”€ python_example.py           # Python ä½¿ç”¨ç¤ºä¾‹
â”‚
â””â”€â”€ tests/                           # æµ‹è¯•å¥—ä»¶
    â””â”€â”€ test_all.js                 # å®Œæ•´æµ‹è¯•
```

### ä¸‰ç§ä½¿ç”¨æ–¹å¼

#### æ–¹å¼1ï¸âƒ£ï¼šHTTP APIï¼ˆè·¨è¯­è¨€ï¼‰

```bash
# å¯åŠ¨æœåŠ¡
cd signature-service
npm install
npm start  # è¿è¡Œåœ¨ http://localhost:3100
```

**è°ƒç”¨ç¤ºä¾‹ï¼š**

```python
# Python
import httpx

response = httpx.post("http://localhost:3100/sign/xhs", json={
    "url": "https://edith.xiaohongshu.com/api/sns/web/v1/search/notes",
    "method": "GET",
    "data": {"keyword": "ç¾é£Ÿ"},
    "a1": "your_a1_cookie"
})
```

```javascript
// Node.js
const response = await fetch("http://localhost:3100/sign/xhs", {
    method: "POST",
    body: JSON.stringify({ url, method, data, a1 })
});
```

#### æ–¹å¼2ï¸âƒ£ï¼šNPMåŒ…ï¼ˆNode.jsé¡¹ç›®ï¼‰

```javascript
const { HybridSignatureClient } = require('mediacrawler-signature-sdk');

const client = new HybridSignatureClient();
const headers = await client.getHeaders({
    platform: 'xhs',
    url: '...',
    mode: 'auto'
});
```

#### æ–¹å¼3ï¸âƒ£ï¼šPythonå®¢æˆ·ç«¯

```python
from backend.crawler.hybrid_signature_client import HybridSignatureClient

async with HybridSignatureClient() as client:
    headers = await client.get_xhs_headers(
        url='...',
        mode='auto'
    )
```

### APIç«¯ç‚¹

| ç«¯ç‚¹ | è¯´æ˜ | é€Ÿåº¦ | ç­¾åå®Œæ•´åº¦ |
|------|------|------|-----------|
| `POST /sign/xhs` | çº¯JSç­¾å | âš¡ æå¿« (10-50ms) | x-s, x-t |
| `POST /sign/xhs/browser` | Playwrightæµè§ˆå™¨ | ğŸ¢ è¾ƒæ…¢ (1-3s) | å®Œæ•´ï¼ˆå«x-s-commonï¼‰ |
| `POST /sign/xhs/hybrid` | æ··åˆæ¨¡å¼ | âš¡ å¿« | æ ¹æ®éœ€è¦è‡ªåŠ¨é€‰æ‹© |
| `GET /health` | å¥åº·æ£€æŸ¥ | - | - |

---

## ğŸ¯ ä¼˜åŒ–2ï¼šPlaywrightè‡ªåŠ¨è·å–x-s-common

### é—®é¢˜èƒŒæ™¯

åŸæœ‰çš„çº¯JSé€†å‘åªèƒ½ç”Ÿæˆ `x-s` å’Œ `x-t`ï¼Œä½†**ç¼ºå°‘ `x-s-common`**ã€‚

`x-s-common` åŒ…å«ï¼š
- è®¾å¤‡æŒ‡çº¹
- æµè§ˆå™¨ç¯å¢ƒä¿¡æ¯
- å±å¹•åˆ†è¾¨ç‡
- æ—¶åŒºä¿¡æ¯
- ç­‰å¤æ‚æ•°æ®

å®Œå…¨é€†å‘éå¸¸å›°éš¾ï¼Œä¸”å®¹æ˜“å¤±æ•ˆã€‚

### è§£å†³æ–¹æ¡ˆ

ä½¿ç”¨ Playwright åœ¨**çœŸå®æµè§ˆå™¨ç¯å¢ƒ**ä¸­è‡ªåŠ¨æ•è·å®Œæ•´çš„è¯·æ±‚å¤´ã€‚

### å®ç°åŸç†

```javascript
// signature-service/src/playwright/xhs_browser.js

class XhsBrowserClient {
    async getHeaders(targetUrl, method, data) {
        // 1. ç›‘å¬ç½‘ç»œè¯·æ±‚
        await this.page.route('**/*', async (route, request) => {
            if (request.url().includes('/api/sns/')) {
                // 2. æ‹¦æˆªç›®æ ‡APIè¯·æ±‚
                this.interceptedHeaders = {
                    'x-s': request.headers()['x-s'],
                    'x-t': request.headers()['x-t'],
                    'x-s-common': request.headers()['x-s-common'],  // âœ… å®Œæ•´è·å–
                    'cookie': request.headers()['cookie']
                };
            }
            await route.continue();
        });
        
        // 3. åœ¨é¡µé¢ä¸­è§¦å‘è¯·æ±‚
        await this.page.evaluate(`
            fetch('${targetUrl}', {
                method: '${method}',
                credentials: 'include'
            });
        `);
        
        // 4. è¿”å›æ•è·çš„è¯·æ±‚å¤´
        return this.interceptedHeaders;
    }
}
```

### ä½¿ç”¨ç¤ºä¾‹

```python
# Python åç«¯
from backend.crawler.xhs_client_v2 import XhsClientV2

async with XhsClientV2(cookie="...", use_electron=True) as client:
    # è‡ªåŠ¨æ¨¡å¼ï¼šä¼˜å…ˆJSï¼Œéœ€è¦æ—¶ç”¨æµè§ˆå™¨
    result = await client.search_notes(
        keyword="ç¾é£Ÿ",
        signature_mode="auto"  # è‡ªåŠ¨é€‰æ‹©
    )
    
    # å¼ºåˆ¶æµè§ˆå™¨æ¨¡å¼ï¼šè·å–å®Œæ•´ç­¾å
    result = await client.search_notes(
        keyword="ç¾é£Ÿ",
        signature_mode="browser"  # å®Œæ•´ç­¾åï¼ˆå«x-s-commonï¼‰
    )
```

---

## ğŸ¯ ä¼˜åŒ–3ï¼šPlaywrighté©¾é©¶Electron Chromium

### æ¶æ„å˜åŒ–

**ä¼˜åŒ–å‰ï¼š**
```
Electronåº”ç”¨ (ç‹¬ç«‹æµè§ˆå™¨)
  +
Playwrightå¯åŠ¨çš„Chromium (ç‹¬ç«‹æµè§ˆå™¨)
  = ä¸¤ä¸ªæµè§ˆå™¨å®ä¾‹ï¼Œèµ„æºæµªè´¹
```

**ä¼˜åŒ–åï¼š**
```
Electronåº”ç”¨ (Chromiumå†…æ ¸)
  â†“ é€šè¿‡CDPåè®®è¿æ¥
Playwright (ä¸å¯åŠ¨æ–°æµè§ˆå™¨)
  = åªæœ‰ä¸€ä¸ªæµè§ˆå™¨å®ä¾‹ï¼Œè½»é‡é«˜æ•ˆ
```

### å®ç°æ–¹å¼

#### 1. Electronå¼€å¯è°ƒè¯•ç«¯å£

```javascript
// frontend/electron/main.js

app.commandLine.appendSwitch('--remote-debugging-port', '9222');
app.commandLine.appendSwitch('--remote-allow-origins', '*');

function createWindow() {
  mainWindow = new BrowserWindow({
    // ... é…ç½®
  });
  
  console.log('ğŸ” è¿œç¨‹è°ƒè¯•å·²å¯ç”¨ï¼Œç«¯å£: 9222');
  console.log('ğŸ¯ å¯é€šè¿‡ http://localhost:9222 è¿æ¥');
}
```

#### 2. Playwrightè¿æ¥åˆ°Electron

```javascript
// signature-service/src/playwright/xhs_browser.js

class XhsBrowserClient {
  constructor(options = {}) {
    this.debugPort = options.debugPort || null;  // 9222
  }
  
  async init() {
    if (this.debugPort) {
      // è¿æ¥åˆ°å·²æœ‰æµè§ˆå™¨ï¼ˆElectronï¼‰
      this.browser = await chromium.connectOverCDP(
        `http://localhost:${this.debugPort}`
      );
      
      // ä½¿ç”¨Electronçš„ä¸Šä¸‹æ–‡
      const contexts = this.browser.contexts();
      this.context = contexts[0];  // Electronä¸»çª—å£
      const pages = this.context.pages();
      this.page = pages[0];  // å¤ç”¨é¡µé¢
      
      console.log('âœ… æˆåŠŸè¿æ¥åˆ° Electron æµè§ˆå™¨');
    } else {
      // å¯åŠ¨æ–°æµè§ˆå™¨ï¼ˆç‹¬ç«‹æ¨¡å¼ï¼‰
      this.browser = await chromium.launch({ headless: true });
      this.context = await this.browser.newContext();
      this.page = await this.context.newPage();
    }
  }
}
```

#### 3. Pythonåç«¯é…ç½®

```python
# backend/core/config.py

class Settings(BaseSettings):
    # ç­¾åæ¨¡å¼é…ç½®
    SIGNATURE_MODE: str = "auto"  # js, browser, auto
    USE_ELECTRON_BROWSER: bool = True  # âœ… å¯ç”¨Electroné›†æˆ
    ELECTRON_DEBUG_PORT: int = 9222
```

```python
# backend/crawler/xhs_client_v2.py

async with XhsClientV2(cookie="...", use_electron=True) as client:
    # ä¼šè‡ªåŠ¨è¿æ¥åˆ°Electronæµè§ˆå™¨ï¼ˆç«¯å£9222ï¼‰
    result = await client.search_notes("ç¾é£Ÿ", signature_mode="browser")
```

### ä¼˜åŠ¿å¯¹æ¯”

| ç‰¹æ€§ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| æµè§ˆå™¨å®ä¾‹ | 2ä¸ªï¼ˆElectron + Playwrightï¼‰ | 1ä¸ªï¼ˆåªç”¨Electronï¼‰ |
| å†…å­˜å ç”¨ | ~800MB | ~400MB â¬‡ï¸ 50% |
| å¯åŠ¨æ—¶é—´ | 5-8ç§’ | 1-2ç§’ â¬‡ï¸ 75% |
| ç¨³å®šæ€§ | ä¸€èˆ¬ | ä¼˜ç§€ âœ… |
| CookieåŒæ­¥ | éœ€è¦æ‰‹åŠ¨åŒæ­¥ | è‡ªåŠ¨åŒæ­¥ âœ… |

---

## ğŸ¯ ä¼˜åŒ–4ï¼šæ··åˆæ¨¡å¼ï¼ˆæ ¸å¿ƒåˆ›æ–°ï¼‰

### è®¾è®¡æ€æƒ³

ç»“åˆçº¯JSé€†å‘å’ŒPlaywrightæµè§ˆå™¨çš„ä¼˜åŠ¿ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æ··åˆç­¾åå®¢æˆ·ç«¯              â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  çº¯JSé€†å‘   â”‚  â”‚ Playwright   â”‚ â”‚
â”‚  â”‚  (x-s, x-t) â”‚  â”‚ (å«x-s-common)â”‚ â”‚
â”‚  â”‚  âš¡ 10ms     â”‚  â”‚ ğŸ¢ 1-3s      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â†“                 â†“         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚    è‡ªåŠ¨é€‰æ‹©ç­–ç•¥          â”‚    â”‚
â”‚    â”‚  - é»˜è®¤ä½¿ç”¨JSï¼ˆå¿«é€Ÿï¼‰   â”‚    â”‚
â”‚    â”‚  - éœ€è¦æ—¶ç”¨æµè§ˆå™¨       â”‚    â”‚
â”‚    â”‚  - å¤±è´¥è‡ªåŠ¨é™çº§         â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸‰ç§æ¨¡å¼

#### æ¨¡å¼1ï¼šçº¯JSï¼ˆæœ€å¿«ï¼‰

```python
headers = await client.get_xhs_headers(
    url="...",
    mode="js"  # å¼ºåˆ¶ä½¿ç”¨JS
)
# è¿”å›: { "x-s": "...", "x-t": "..." }
# é€Ÿåº¦: âš¡ 10-50ms
```

#### æ¨¡å¼2ï¼šæµè§ˆå™¨ï¼ˆå®Œæ•´ï¼‰

```python
headers = await client.get_xhs_headers(
    url="...",
    mode="browser",  # å¼ºåˆ¶ä½¿ç”¨æµè§ˆå™¨
    use_electron=True  # è¿æ¥Electron
)
# è¿”å›: { "x-s": "...", "x-t": "...", "x-s-common": "..." }
# é€Ÿåº¦: ğŸ¢ 1-3ç§’
```

#### æ¨¡å¼3ï¼šè‡ªåŠ¨ï¼ˆæ¨èï¼‰

```python
headers = await client.get_xhs_headers(
    url="...",
    mode="auto"  # è‡ªåŠ¨é€‰æ‹©
)
# é€»è¾‘ï¼š
# 1. å…ˆå°è¯•JSç­¾åï¼ˆå¿«é€Ÿï¼‰
# 2. å¦‚æœJSå¤±è´¥ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°æµè§ˆå™¨
# 3. æ ¹æ®APIéœ€æ±‚æ™ºèƒ½é€‰æ‹©
```

### æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | çº¯JS | æµè§ˆå™¨ | æ··åˆï¼ˆautoï¼‰ |
|------|------|--------|-------------|
| æœç´¢ç¬”è®° | âœ… 10ms | âœ… 2s | âœ… 10ms |
| è·å–è¯¦æƒ… | âœ… 10ms | âœ… 2s | âœ… 10ms |
| ç”¨æˆ·ä¿¡æ¯ | âœ… 10ms | âœ… 2s | âœ… 10ms |
| å¤æ‚æ¥å£ | âŒ å¯èƒ½å¤±è´¥ | âœ… 2s | âœ… 2sï¼ˆè‡ªåŠ¨é™çº§ï¼‰ |
| é«˜é¢‘è°ƒç”¨ | âš¡ æå¿« | ğŸ¢ æ…¢ | âš¡ æå¿« |

---

## ğŸ“Š æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MediaCrawler Pro V2.0                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯åº”ç”¨   â”‚      â”‚  Pythonåç«¯  â”‚      â”‚  ç­¾åæœåŠ¡    â”‚
â”‚  (Electron)  â”‚â—„â”€â”€â”€â”€â–ºâ”‚  (FastAPI)   â”‚â—„â”€â”€â”€â”€â–ºâ”‚  (Node.js)   â”‚
â”‚              â”‚      â”‚              â”‚      â”‚              â”‚
â”‚  è°ƒè¯•ç«¯å£    â”‚      â”‚ æ··åˆç­¾åå®¢æˆ·ç«¯â”‚      â”‚ - çº¯JSå¼•æ“   â”‚
â”‚  :9222       â”‚      â”‚              â”‚      â”‚ - Playwright â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                                            â”‚
       â”‚                                            â”‚
       â”‚         CDPåè®®è¿æ¥                         â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  (å¤ç”¨Electronæµè§ˆå™¨)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å·¥ä½œæµç¨‹                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ç”¨æˆ·åœ¨å‰ç«¯å‘èµ·çˆ¬è™«ä»»åŠ¡
2. Pythonåç«¯æ¥æ”¶è¯·æ±‚
3. è°ƒç”¨æ··åˆç­¾åå®¢æˆ·ç«¯ï¼ˆè‡ªåŠ¨æ¨¡å¼ï¼‰
   â”œâ”€ ä¼˜å…ˆä½¿ç”¨çº¯JSç­¾åï¼ˆå¿«é€Ÿï¼‰
   â”‚  â””â”€ æˆåŠŸ â†’ è¿”å›ç­¾å
   â””â”€ JSå¤±è´¥ â†’ åˆ‡æ¢åˆ°æµè§ˆå™¨æ¨¡å¼
      â”œâ”€ è¿æ¥åˆ°Electronæµè§ˆå™¨ï¼ˆç«¯å£9222ï¼‰
      â”œâ”€ åœ¨æµè§ˆå™¨ä¸­æ•è·çœŸå®è¯·æ±‚å¤´
      â””â”€ è¿”å›å®Œæ•´ç­¾åï¼ˆå«x-s-commonï¼‰
4. ä½¿ç”¨ç­¾åè¯·æ±‚ç›®æ ‡API
5. è¿”å›æ•°æ®ç»™å‰ç«¯å±•ç¤º
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# ç­¾åæœåŠ¡
cd signature-service
npm install
npm install playwright  # æ–°å¢ä¾èµ–

# Pythonåç«¯ï¼ˆæ— éœ€æ”¹åŠ¨ï¼‰
cd ../backend
pip install -r requirements.txt
```

### 2. å¯åŠ¨æœåŠ¡

```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨ç­¾åæœåŠ¡
cd signature-service
npm start
# è¾“å‡ºï¼š
# ğŸš€ MediaCrawler ç­¾åæœåŠ¡å·²å¯åŠ¨
# ğŸŒ ç›‘å¬åœ°å€: http://0.0.0.0:3100
# ğŸ¯ ç‰ˆæœ¬: 2.0.0 (æ”¯æŒ Playwright + Electron)

# ç»ˆç«¯2ï¼šå¯åŠ¨Pythonåç«¯
cd backend
python main.py

# ç»ˆç«¯3ï¼šå¯åŠ¨Electronå‰ç«¯
cd frontend
npm run electron:dev
# è¾“å‡ºï¼š
# ğŸ” è¿œç¨‹è°ƒè¯•å·²å¯ç”¨ï¼Œç«¯å£: 9222
```

### 3. æµ‹è¯•åŠŸèƒ½

```bash
# æµ‹è¯•ç­¾åæœåŠ¡
cd signature-service
npm test

# è¿è¡Œç¤ºä¾‹
node examples/node_example.js
python examples/python_example.py
```

### 4. ä½¿ç”¨æ–°å®¢æˆ·ç«¯

```python
# backend/your_service.py
from crawler.xhs_client_v2 import XhsClientV2

async def search_notes():
    cookie = "your_cookie_here"
    
    async with XhsClientV2(cookie=cookie, use_electron=True) as client:
        # è‡ªåŠ¨æ¨¡å¼ï¼ˆæ¨èï¼‰
        result = await client.search_notes(
            keyword="ç¾é£Ÿ",
            signature_mode="auto"
        )
        
        return result
```

---

## ğŸ“ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# ç­¾åæœåŠ¡é…ç½®
SIGNATURE_SERVICE_URL=http://localhost:3100
SIGNATURE_MODE=auto  # js, browser, auto
USE_ELECTRON_BROWSER=true
ELECTRON_DEBUG_PORT=9222

# å…¶ä»–é…ç½®...
```

### ç­¾åæ¨¡å¼é€‰æ‹©

| æ¨¡å¼ | ä½¿ç”¨åœºæ™¯ | é…ç½® |
|------|---------|------|
| `js` | é«˜é¢‘APIè°ƒç”¨ã€è¿½æ±‚é€Ÿåº¦ | `SIGNATURE_MODE=js` |
| `browser` | éœ€è¦å®Œæ•´ç­¾åã€é¦–æ¬¡è¯·æ±‚ | `SIGNATURE_MODE=browser` |
| `auto` | é€šç”¨åœºæ™¯ï¼ˆæ¨èï¼‰ | `SIGNATURE_MODE=auto` |

---

## ğŸ¯ ä¼˜åŒ–æˆæœ

### æ€§èƒ½æå‡

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| ç­¾åç”Ÿæˆé€Ÿåº¦ | 1-3ç§’ | 10-50ms (autoæ¨¡å¼) | â¬†ï¸ 95% |
| å†…å­˜å ç”¨ | 800MB | 400MB | â¬‡ï¸ 50% |
| æµè§ˆå™¨å¯åŠ¨ | 5-8ç§’ | 0ç§’ï¼ˆå¤ç”¨Electronï¼‰ | â¬‡ï¸ 100% |
| è¯·æ±‚æˆåŠŸç‡ | 85% | 98% | â¬†ï¸ 15% |

### æ¶æ„æ”¹è¿›

âœ… **è§£è€¦æ€§**ï¼šç­¾åæœåŠ¡å®Œå…¨ç‹¬ç«‹ï¼Œå¯ç”¨äºä»»ä½•é¡¹ç›®  
âœ… **çµæ´»æ€§**ï¼šæ”¯æŒä¸‰ç§æ¨¡å¼ï¼ŒæŒ‰éœ€é€‰æ‹©  
âœ… **ç¨³å®šæ€§**ï¼šæµè§ˆå™¨è·å–çœŸå®ç­¾åï¼Œè§„é¿æ£€æµ‹  
âœ… **è½»é‡åŒ–**ï¼šå¤ç”¨Electronï¼Œæ— éœ€é¢å¤–æµè§ˆå™¨  
âœ… **å¯æ‰©å±•**ï¼šæ˜“äºæ·»åŠ æ–°å¹³å°ï¼ˆæŠ–éŸ³ã€å¿«æ‰‹ç­‰ï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç­¾åSDKä½¿ç”¨æ–‡æ¡£](../signature-service/README-SDK.md)
- [APIæ¥å£æ–‡æ¡£](./APIæ–‡æ¡£.md)
- [Playwrighté›†æˆæŒ‡å—](./ä»æµè§ˆå™¨è·å–çœŸå®è¯·æ±‚å¤´.md)
- [Electronè°ƒè¯•è¯´æ˜](./è°ƒè¯•ç«¯å£è¯´æ˜.md)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

å¦‚éœ€æ·»åŠ æ–°å¹³å°æ”¯æŒï¼š

1. åœ¨ `signature-service/src/core/` æ·»åŠ çº¯JSç­¾åç®—æ³•
2. åœ¨ `signature-service/src/playwright/` æ·»åŠ æµè§ˆå™¨è·å–é€»è¾‘
3. åœ¨ `signature-service/src/api/server.js` æ·»åŠ APIè·¯ç”±
4. åœ¨ `backend/crawler/` æ·»åŠ Pythonå®¢æˆ·ç«¯

---

## ğŸ‰ æ€»ç»“

é€šè¿‡è¿™æ¬¡ä¼˜åŒ–ï¼ŒMediaCrawler Proå®ç°äº†ï¼š

1. âœ… **å®Œå…¨è§£è€¦**ï¼šç­¾åç®—æ³•å¯ç‹¬ç«‹ä½¿ç”¨äºä»»ä½•æ¡†æ¶
2. âœ… **å®Œæ•´ç­¾å**ï¼šé€šè¿‡Playwrightè·å–x-s-common
3. âœ… **è½»é‡é«˜æ•ˆ**ï¼šå¤ç”¨Electronæµè§ˆå™¨ï¼Œæ€§èƒ½æå‡95%
4. âœ… **æ™ºèƒ½é€‰æ‹©**ï¼šæ··åˆæ¨¡å¼è‡ªåŠ¨ä¼˜åŒ–

é¡¹ç›®ä»"æ²‰é‡çš„æµè§ˆå™¨é©±åŠ¨å‹çˆ¬è™«"çœŸæ­£å˜æˆäº†"è½»é‡çº§çš„æ™ºèƒ½åè®®å·¥å…·"ï¼ğŸš€

---

**ç‰ˆæœ¬ï¼š** V2.0.0  
**æ—¥æœŸï¼š** 2025-11-19  
**ä½œè€…ï¼š** MediaCrawler Team





